<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="author" content="TWiR Contributors" />
    <meta name="copyright" content="TWiR Contributors" />


<meta name="keywords" content=", This Week in Rust, " />

    <title>This Week in Rust 51  Â· This Week in Rust
</title>


    <link href="https://this-week-in-rust.org/rss.xml" type="application/rss+xml" rel="alternate" title="This Week in Rust - Full RSS Feed" />
    <link href="https://this-week-in-rust.org/atom.xml" type="application/atom+xml" rel="alternate" title="This Week in Rust - Full Atom Feed" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />

    <link rel="stylesheet" href="/theme/css/web-min.css?84010e5b" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.rust-lang.org/static/images/favicon-32x32.png" />
    <link rel="icon" type="image/svg+xml" href="https://www.rust-lang.org/static/images/favicon.svg" />
    <link rel="mask-icon" href="https://www.rust-lang.org/static/images/safari-pinned-tab.svg" color="#000" />

  </head>
  <body>
    <header class="site-header">
      <div class="container wrapper">
        <a class="site-title" href="https://this-week-in-rust.org/">This Week in Rust</a>
      </div>
    </header>

    <div class="page-content">
      <div class="container wrapper">
<div class="post">
  <header class="post-header">
<div class="row post-title">
  <div class="col-xs-12 col-sm-4">
    <span class="small text-muted time-prefix">
      <time pubdate="pubdate" datetime="2014-06-10T22:46:00-04:00">10 JUN 2014</time>
    </span>
  </div>
  <div class="col-xs-12 col-sm-8 text-right custom-xs-text-left">
    <a href="https://this-week-in-rust.org/blog/2014/06/10/this-week-in-rust-51/">This Week in Rust 51</a>
  </div>
</div>  </header>

  <article class="post-content">
    <p>Hello and welcome to another issue of <em>This Week in Rust</em>!
<a href="http://rust-lang.org">Rust</a> is a systems language pursuing the trifecta:
safe, concurrent, and fast. This is a weekly summary of its progress and
community. Want something mentioned? <a href="mailto:corey@octayn.net?subject=This%20Week%20in%20Rust%20Suggestion">Send me an
email!</a>
Want to get involved? <a href="https://github.com/mozilla/rust/wiki/Note-guide-for-new-contributors">We love
contributions</a>.</p>
<p>This issue combines two weeks of Rust and three weeks of Servo. Additionally,
in a little over a month month, I'll be releasing <a href="http://blog.octayn.net/blog/2014/06/09/future-of-twir/">an entirely reworked TWiR
website</a>. Until then,
TWiR might be a bit lighter than usual.</p>
<!-- more -->

<h1>What's cooking on master?</h1>
<p>126 pull requests were merged in the last week.</p>
<h2>Breaking Change Log</h2>
<ul>
<li>std: Remove the <code>as_utf16_p</code> functions</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">These</span> <span class="n">functions</span> <span class="n">are</span> <span class="k">all</span> <span class="n">much</span> <span class="n">better</span> <span class="n">expressed</span> <span class="n">via</span> <span class="n">RAII</span> <span class="k">using</span> <span class="n">the</span> <span class="nf">to_utf16</span><span class="p">()</span>
<span class="n">method</span> <span class="k">on</span> <span class="n">strings</span><span class="p">.</span> <span class="n">This</span> <span class="n">refactoring</span> <span class="n">also</span> <span class="n">takes</span> <span class="n">this</span> <span class="n">opportunity</span> <span class="k">to</span> <span class="n">properly</span>
<span class="n">handle</span> <span class="k">when</span> <span class="n">filenames</span> <span class="n">aren</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">valid</span> <span class="n">unicode</span> <span class="k">when</span> <span class="n">passed</span> <span class="n">through</span> <span class="k">to</span> <span class="n">the</span> <span class="n">windows</span>
<span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">layer</span> <span class="k">by</span> <span class="n">properly</span> <span class="n">returning</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">errors</span><span class="p">.</span>

<span class="k">All</span> <span class="n">previous</span> <span class="n">users</span> <span class="n">of</span> <span class="n">the</span> <span class="ss">`as_utf16_p`</span> <span class="k">or</span> <span class="ss">`as_utf16_mut_p`</span> <span class="n">functions</span> <span class="n">will</span> <span class="n">need</span>
<span class="k">to</span> <span class="k">convert</span> <span class="n">their</span> <span class="n">code</span> <span class="k">to</span> <span class="k">using</span> <span class="ss">`foo.to_utf16().append_one(0)`</span> <span class="k">to</span> <span class="n">get</span> <span class="n">a</span>
<span class="no">null</span><span class="o">-</span><span class="k">terminated</span> <span class="n">utf16</span> <span class="n">string</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>Implement <code>#[plugin_registrar]</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">See</span> <span class="n">RFC</span> <span class="mi">22</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>core: Move the collections traits to libcollections</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">commit</span> <span class="n">moves</span> <span class="n">Mutable</span><span class="p">,</span> <span class="n">Map</span><span class="p">,</span> <span class="n">MutableMap</span><span class="p">,</span> <span class="kt">Set</span><span class="p">,</span> <span class="k">and</span> <span class="n">MutableSet</span> <span class="k">from</span>
<span class="ss">`core::collections`</span> <span class="k">to</span> <span class="n">the</span> <span class="ss">`collections`</span> <span class="n">crate</span> <span class="n">at</span> <span class="n">the</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span><span class="p">.</span> <span class="n">Additionally</span><span class="p">,</span>
<span class="n">this</span> <span class="n">removes</span> <span class="n">the</span> <span class="ss">`deque`</span> <span class="n">module</span> <span class="k">and</span> <span class="n">moves</span> <span class="n">the</span> <span class="ss">`Deque`</span> <span class="n">trait</span> <span class="k">to</span> <span class="n">only</span> <span class="n">being</span>
<span class="n">available</span> <span class="n">at</span> <span class="n">the</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">of</span> <span class="n">the</span> <span class="n">collections</span> <span class="n">crate</span><span class="p">.</span>

<span class="k">All</span> <span class="n">functionality</span> <span class="n">continues</span> <span class="k">to</span> <span class="n">be</span> <span class="n">reexported</span> <span class="n">through</span> <span class="ss">`std::collections`</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>core: Rename <code>container</code> mod to <code>collections</code>. Closes #12543</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">Also</span> <span class="n">renames</span> <span class="n">the</span> <span class="ss">`Container`</span> <span class="n">trait</span> <span class="k">to</span> <span class="ss">`Collection`</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>std: Extract librustrt out of libstd</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">As</span> <span class="n">part</span> <span class="n">of</span> <span class="n">the</span> <span class="n">libstd</span> <span class="n">facade</span> <span class="n">efforts</span><span class="p">,</span> <span class="n">this</span> <span class="n">commit</span> <span class="n">extracts</span> <span class="n">the</span> <span class="n">runtime</span> <span class="n">interface</span>
<span class="k">out</span> <span class="n">of</span> <span class="n">the</span> <span class="n">standard</span> <span class="n">library</span> <span class="k">into</span> <span class="n">a</span> <span class="n">standalone</span> <span class="n">crate</span><span class="p">,</span> <span class="n">librustrt</span><span class="p">.</span> <span class="n">This</span> <span class="n">crate</span> <span class="n">will</span>
<span class="n">provide</span> <span class="n">the</span> <span class="n">following</span> <span class="n">services</span><span class="p">:</span>

<span class="o">*</span> <span class="n">Definition</span> <span class="n">of</span> <span class="n">the</span> <span class="n">rtio</span> <span class="n">interface</span>
<span class="o">*</span> <span class="n">Definition</span> <span class="n">of</span> <span class="n">the</span> <span class="n">Runtime</span> <span class="n">interface</span>
<span class="o">*</span> <span class="n">Implementation</span> <span class="n">of</span> <span class="n">the</span> <span class="n">Task</span> <span class="n">structure</span>
<span class="o">*</span> <span class="n">Implementation</span> <span class="n">of</span> <span class="n">task</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">data</span>
<span class="o">*</span> <span class="n">Implementation</span> <span class="n">of</span> <span class="n">task</span> <span class="n">failure</span> <span class="n">via</span> <span class="n">unwinding</span> <span class="n">via</span> <span class="n">libunwind</span>
<span class="o">*</span> <span class="n">Implementation</span> <span class="n">of</span> <span class="n">runtime</span> <span class="n">initialization</span> <span class="k">and</span> <span class="n">shutdown</span>
<span class="o">*</span> <span class="n">Implementation</span> <span class="n">of</span> <span class="n">thread</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">storage</span> <span class="k">for</span> <span class="n">the</span> <span class="n">local</span> <span class="n">rust</span> <span class="n">Task</span>

<span class="n">Notably</span><span class="p">,</span> <span class="n">this</span> <span class="n">crate</span> <span class="n">avoids</span> <span class="n">the</span> <span class="n">following</span> <span class="n">services</span><span class="p">:</span>

<span class="o">*</span> <span class="n">Thread</span> <span class="n">creation</span> <span class="k">and</span> <span class="n">destruction</span><span class="p">.</span> <span class="n">The</span> <span class="n">crate</span> <span class="n">does</span> <span class="k">not</span> <span class="k">require</span> <span class="n">the</span> <span class="n">knowledge</span> <span class="n">of</span>
  <span class="n">an</span> <span class="n">OS</span> <span class="n">threading</span> <span class="n">system</span><span class="p">,</span> <span class="k">and</span> <span class="k">as</span> <span class="n">a</span> <span class="n">result</span> <span class="n">it</span> <span class="n">seemed</span> <span class="n">best</span> <span class="k">to</span> <span class="k">leave</span> <span class="k">out</span> <span class="n">the</span>
  <span class="ss">`rt::thread`</span> <span class="n">module</span> <span class="k">from</span> <span class="n">librustrt</span><span class="p">.</span> <span class="n">The</span> <span class="n">librustrt</span> <span class="n">module</span> <span class="n">does</span> <span class="n">depend</span> <span class="k">on</span>
  <span class="n">mutexes</span><span class="p">,</span> <span class="n">however</span><span class="p">.</span>
<span class="o">*</span> <span class="n">Implementation</span> <span class="n">of</span> <span class="n">backtraces</span><span class="p">.</span> <span class="n">There</span> <span class="k">is</span> <span class="n">no</span> <span class="n">inherent</span> <span class="n">requirement</span> <span class="k">for</span> <span class="n">the</span> <span class="n">runtime</span>
  <span class="k">to</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="n">generate</span> <span class="n">backtraces</span><span class="p">.</span> <span class="k">As</span> <span class="n">will</span> <span class="n">be</span> <span class="n">discussed</span> <span class="n">later</span><span class="p">,</span> <span class="n">this</span>
  <span class="n">functionality</span> <span class="n">continues</span> <span class="k">to</span> <span class="n">live</span> <span class="k">in</span> <span class="n">libstd</span> <span class="n">rather</span> <span class="n">than</span> <span class="n">librustrt</span><span class="p">.</span>

<span class="k">As</span> <span class="n">usual</span><span class="p">,</span> <span class="n">a</span> <span class="n">number</span> <span class="n">of</span> <span class="n">architectural</span> <span class="n">changes</span> <span class="n">were</span> <span class="n">required</span> <span class="k">to</span> <span class="n">make</span> <span class="n">this</span> <span class="n">crate</span>
<span class="n">possible</span><span class="p">.</span> <span class="n">Users</span> <span class="n">of</span> <span class="s2">&quot;stable&quot;</span> <span class="n">functionality</span> <span class="n">will</span> <span class="k">not</span> <span class="n">be</span> <span class="n">impacted</span> <span class="k">by</span> <span class="n">this</span> <span class="k">change</span><span class="p">,</span>
<span class="n">but</span> <span class="n">users</span> <span class="n">of</span> <span class="n">the</span> <span class="ss">`std::rt`</span> <span class="n">module</span> <span class="n">will</span> <span class="n">likely</span> <span class="n">note</span> <span class="n">the</span> <span class="n">changes</span><span class="p">.</span> <span class="n">A</span> <span class="n">list</span> <span class="n">of</span>
<span class="n">architectural</span> <span class="n">changes</span> <span class="n">made</span> <span class="k">is</span><span class="p">:</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">stdout</span><span class="o">/</span><span class="n">stderr</span> <span class="n">handles</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">live</span> <span class="n">directly</span> <span class="n">inside</span> <span class="n">of</span> <span class="n">the</span> <span class="ss">`Task`</span>
  <span class="n">structure</span><span class="p">.</span> <span class="n">This</span> <span class="k">is</span> <span class="n">a</span> <span class="n">consequence</span> <span class="n">of</span> <span class="n">librustrt</span> <span class="k">not</span> <span class="n">knowing</span> <span class="n">about</span> <span class="ss">`std::io`</span><span class="p">.</span>
  <span class="n">These</span> <span class="n">two</span> <span class="n">handles</span> <span class="n">are</span> <span class="n">now</span> <span class="n">stored</span> <span class="n">inside</span> <span class="n">of</span> <span class="n">task</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">data</span><span class="p">.</span>

  <span class="n">The</span> <span class="n">handles</span> <span class="n">were</span> <span class="n">originally</span> <span class="n">stored</span> <span class="n">inside</span> <span class="n">of</span> <span class="n">the</span> <span class="ss">`Task`</span> <span class="k">for</span> <span class="n">perf</span> <span class="n">reasons</span><span class="p">,</span> <span class="k">and</span>
  <span class="n">TLD</span> <span class="k">is</span> <span class="k">not</span> <span class="n">currently</span> <span class="k">as</span> <span class="n">fast</span> <span class="k">as</span> <span class="n">it</span> <span class="n">could</span> <span class="n">be</span><span class="p">.</span> <span class="k">For</span> <span class="n">comparison</span><span class="p">,</span> <span class="mi">100</span><span class="n">k</span> <span class="n">prints</span> <span class="n">goes</span>
  <span class="k">from</span> <span class="mi">59</span><span class="n">ms</span> <span class="k">to</span> <span class="mi">68</span><span class="nf">ms</span> <span class="p">(</span><span class="n">a</span> <span class="mi">15</span><span class="o">%</span> <span class="n">slowdown</span><span class="p">).</span> <span class="n">This</span> <span class="n">appeared</span> <span class="k">to</span> <span class="n">me</span> <span class="k">to</span> <span class="n">be</span> <span class="n">an</span> <span class="n">acceptable</span>
  <span class="n">perf</span> <span class="n">loss</span> <span class="k">for</span> <span class="n">the</span> <span class="n">successful</span> <span class="n">extraction</span> <span class="n">of</span> <span class="n">a</span> <span class="n">librustrt</span> <span class="n">crate</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="ss">`rtio`</span> <span class="n">module</span> <span class="n">was</span> <span class="n">forced</span> <span class="k">to</span> <span class="n">duplicate</span> <span class="n">more</span> <span class="n">functionality</span> <span class="n">of</span> <span class="ss">`std::io`</span><span class="p">.</span> <span class="k">As</span>
  <span class="n">the</span> <span class="n">module</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">depends</span> <span class="k">on</span> <span class="ss">`std::io`</span><span class="p">,</span> <span class="ss">`rtio`</span> <span class="n">now</span> <span class="n">defines</span> <span class="n">structures</span> <span class="n">such</span>
  <span class="k">as</span> <span class="n">socket</span> <span class="n">addresses</span><span class="p">,</span> <span class="n">addrinfo</span> <span class="n">fiddly</span> <span class="n">bits</span><span class="p">,</span> <span class="n">etc</span><span class="p">.</span> <span class="n">The</span> <span class="k">primary</span> <span class="k">change</span> <span class="n">made</span> <span class="n">was</span>
  <span class="n">that</span> <span class="ss">`rtio`</span> <span class="n">now</span> <span class="n">defines</span> <span class="n">its</span> <span class="n">own</span> <span class="ss">`IoError`</span> <span class="n">type</span><span class="p">.</span> <span class="n">This</span> <span class="n">type</span> <span class="k">is</span> <span class="k">distinct</span> <span class="k">from</span>
  <span class="ss">`std::io::IoError`</span> <span class="k">in</span> <span class="n">that</span> <span class="n">it</span> <span class="n">does</span> <span class="k">not</span> <span class="n">have</span> <span class="n">an</span> <span class="kt">enum</span> <span class="k">for</span> <span class="n">what</span> <span class="n">error</span> <span class="n">occurred</span><span class="p">,</span>
  <span class="n">but</span> <span class="n">rather</span> <span class="n">a</span> <span class="n">platform</span><span class="o">-</span><span class="k">specific</span> <span class="n">error</span> <span class="n">code</span><span class="p">.</span>

  <span class="n">The</span> <span class="n">native</span> <span class="k">and</span> <span class="n">green</span> <span class="n">libraries</span> <span class="n">will</span> <span class="n">be</span> <span class="n">updated</span> <span class="k">in</span> <span class="n">later</span> <span class="n">commits</span> <span class="k">for</span> <span class="n">this</span>
  <span class="k">change</span><span class="p">,</span> <span class="k">and</span> <span class="n">the</span> <span class="n">bulk</span> <span class="n">of</span> <span class="n">this</span> <span class="n">effort</span> <span class="n">was</span> <span class="n">put</span> <span class="n">behind</span> <span class="n">updating</span> <span class="n">the</span> <span class="n">two</span> <span class="n">libraries</span>
  <span class="k">for</span> <span class="n">this</span> <span class="k">change</span> <span class="p">(</span><span class="k">with</span> <span class="ss">`rtio`</span><span class="p">).</span>

<span class="o">*</span> <span class="n">Printing</span> <span class="n">a</span> <span class="n">message</span> <span class="k">on</span> <span class="n">task</span> <span class="nf">failure</span> <span class="p">(</span><span class="n">along</span> <span class="k">with</span> <span class="n">the</span> <span class="n">backtrace</span><span class="p">)</span> <span class="n">continues</span> <span class="k">to</span>
  <span class="n">live</span> <span class="k">in</span> <span class="n">libstd</span><span class="p">,</span> <span class="k">not</span> <span class="k">in</span> <span class="n">librustrt</span><span class="p">.</span> <span class="n">This</span> <span class="k">is</span> <span class="n">a</span> <span class="n">consequence</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">decision</span>
  <span class="k">to</span> <span class="n">move</span> <span class="n">the</span> <span class="n">stdout</span><span class="o">/</span><span class="n">stderr</span> <span class="n">handles</span> <span class="k">to</span> <span class="n">TLD</span> <span class="n">rather</span> <span class="n">than</span> <span class="n">inside</span> <span class="n">the</span> <span class="ss">`Task`</span> <span class="n">itself</span><span class="p">.</span>
  <span class="n">The</span> <span class="n">unwinding</span> <span class="n">API</span> <span class="n">now</span> <span class="n">supports</span> <span class="n">registration</span> <span class="n">of</span> <span class="n">global</span> <span class="n">callback</span> <span class="n">functions</span> <span class="n">which</span>
  <span class="n">will</span> <span class="n">be</span> <span class="n">invoked</span> <span class="k">when</span> <span class="n">a</span> <span class="n">task</span> <span class="n">fails</span><span class="p">,</span> <span class="n">allowing</span> <span class="k">for</span> <span class="n">libstd</span> <span class="k">to</span> <span class="n">register</span> <span class="n">a</span> <span class="n">function</span>
  <span class="k">to</span> <span class="n">print</span> <span class="n">a</span> <span class="n">message</span> <span class="k">and</span> <span class="n">a</span> <span class="n">backtrace</span><span class="p">.</span>

  <span class="n">The</span> <span class="n">API</span> <span class="k">for</span> <span class="n">registering</span> <span class="n">a</span> <span class="n">callback</span> <span class="k">is</span> <span class="n">experimental</span> <span class="k">and</span> <span class="n">unsafe</span><span class="p">,</span> <span class="k">as</span> <span class="n">the</span>
  <span class="n">ramifications</span> <span class="n">of</span> <span class="n">running</span> <span class="n">code</span> <span class="k">on</span> <span class="n">unwinding</span> <span class="k">is</span> <span class="n">pretty</span> <span class="n">hairy</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="ss">`std::unstable::mutex`</span> <span class="n">module</span> <span class="n">has</span> <span class="n">moved</span> <span class="k">to</span> <span class="ss">`std::rt::mutex`</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="ss">`std::unstable::sync`</span> <span class="n">module</span> <span class="n">has</span> <span class="n">been</span> <span class="n">moved</span> <span class="k">to</span> <span class="ss">`std::rt::exclusive`</span> <span class="k">and</span>
  <span class="n">the</span> <span class="n">type</span> <span class="n">has</span> <span class="n">been</span> <span class="n">rewritten</span> <span class="k">to</span> <span class="k">not</span> <span class="n">internally</span> <span class="n">have</span> <span class="n">an</span> <span class="n">Arc</span> <span class="k">and</span> <span class="k">to</span> <span class="n">have</span> <span class="n">an</span> <span class="n">RAII</span>
  <span class="n">guard</span> <span class="n">structure</span> <span class="k">when</span> <span class="n">locking</span><span class="p">.</span> <span class="n">Old</span> <span class="n">code</span> <span class="n">should</span> <span class="n">stop</span> <span class="k">using</span> <span class="ss">`Exclusive`</span> <span class="k">in</span> <span class="n">favor</span>
  <span class="n">of</span> <span class="n">the</span> <span class="n">primitives</span> <span class="k">in</span> <span class="ss">`libsync`</span><span class="p">,</span> <span class="n">but</span> <span class="k">if</span> <span class="n">necessary</span><span class="p">,</span> <span class="n">old</span> <span class="n">code</span> <span class="n">should</span> <span class="n">port</span> <span class="k">to</span>
  <span class="ss">`Arc&lt;Exclusive&lt;T&gt;&gt;`</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">local</span> <span class="n">heap</span> <span class="n">has</span> <span class="n">been</span> <span class="n">stripped</span> <span class="n">down</span> <span class="k">to</span> <span class="n">have</span> <span class="n">fewer</span> <span class="n">debugging</span> <span class="n">options</span><span class="p">.</span> <span class="n">None</span> <span class="n">of</span>
  <span class="n">these</span> <span class="n">were</span> <span class="n">tested</span><span class="p">,</span> <span class="k">and</span> <span class="n">none</span> <span class="n">of</span> <span class="n">these</span> <span class="n">have</span> <span class="n">been</span> <span class="n">used</span> <span class="k">in</span> <span class="n">a</span> <span class="n">very</span> <span class="k">long</span> <span class="kt">time</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>Rename Iterator::len to count</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="k">commit</span> <span class="n">carries</span> <span class="k">out</span> <span class="n">the</span> <span class="n">request</span> <span class="k">from</span> <span class="n">issue</span> <span class="o">#</span><span class="mi">14678</span><span class="p">:</span>

<span class="o">&gt;</span> <span class="n">The</span> <span class="k">method</span> <span class="o">`</span><span class="n">Iterator</span><span class="p">::</span><span class="n">len</span><span class="p">()</span><span class="o">`</span> <span class="k">is</span> <span class="n">surprising</span><span class="p">,</span> <span class="k">as</span> <span class="k">all</span> <span class="n">the</span> <span class="n">other</span> <span class="n">uses</span> <span class="k">of</span>
<span class="o">&gt;</span> <span class="o">`</span><span class="n">len</span><span class="p">()</span><span class="o">`</span> <span class="k">do</span> <span class="k">not</span> <span class="n">consume</span> <span class="n">the</span> <span class="n">value</span><span class="p">.</span> <span class="o">`</span><span class="n">len</span><span class="p">()</span><span class="o">`</span> <span class="n">would</span> <span class="n">make</span> <span class="k">more</span> <span class="n">sense</span> <span class="k">to</span> <span class="n">be</span>
<span class="o">&gt;</span> <span class="k">called</span> <span class="o">`</span><span class="k">count</span><span class="p">()</span><span class="o">`</span><span class="p">,</span> <span class="n">but</span> <span class="n">that</span> <span class="n">would</span> <span class="n">collide</span> <span class="k">with</span> <span class="n">the</span> <span class="k">current</span>
<span class="o">&gt;</span> <span class="o">`</span><span class="n">Iterator</span><span class="p">::</span><span class="k">count</span><span class="p">(</span><span class="o">|</span><span class="n">T</span><span class="o">|</span> <span class="o">-&gt;</span> <span class="n">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">unit</span><span class="o">`</span> <span class="k">method</span><span class="p">.</span> <span class="n">That</span> <span class="k">method</span><span class="p">,</span> <span class="n">however</span><span class="p">,</span> <span class="k">is</span>
<span class="o">&gt;</span> <span class="n">a</span> <span class="nb">bit</span> <span class="n">redundant</span><span class="p">,</span> <span class="k">and</span> <span class="n">can</span> <span class="n">be</span> <span class="n">easily</span> <span class="n">replaced</span> <span class="k">with</span>
<span class="o">&gt;</span> <span class="o">`</span><span class="n">iter</span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">).</span><span class="k">count</span><span class="p">()</span><span class="o">`</span><span class="p">.</span>
<span class="o">&gt;</span> <span class="k">After</span> <span class="n">this</span> <span class="n">change</span><span class="p">,</span> <span class="n">we</span> <span class="n">could</span> <span class="k">then</span> <span class="n">define</span> <span class="n">the</span> <span class="o">`</span><span class="n">len</span><span class="p">()</span><span class="o">`</span> <span class="k">method</span>
<span class="o">&gt;</span> <span class="k">on</span> <span class="o">`</span><span class="n">iter</span><span class="p">::</span><span class="n">ExactSize</span><span class="o">`</span><span class="p">.</span>

<span class="n">Closes</span> <span class="o">#</span><span class="mi">14678</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>auto merge of #14538 : alexcrichton/rust/libcollections, r=brson</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">As</span> <span class="k">with</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">commit</span> <span class="k">with</span> <span class="ss">`librand`</span><span class="p">,</span> <span class="n">this</span> <span class="n">commit</span> <span class="n">shuffles</span> <span class="n">around</span> <span class="n">some</span>
<span class="ss">`collections`</span> <span class="n">code</span><span class="p">.</span> <span class="n">The</span> <span class="n">new</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">world</span> <span class="k">is</span> <span class="n">similar</span> <span class="k">to</span> <span class="n">that</span> <span class="n">of</span> <span class="n">librand</span><span class="p">:</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">libcollections</span> <span class="n">crate</span> <span class="n">now</span> <span class="n">only</span> <span class="n">depends</span> <span class="k">on</span> <span class="n">libcore</span> <span class="k">and</span> <span class="n">liballoc</span><span class="p">.</span>
<span class="o">*</span> <span class="n">The</span> <span class="n">standard</span> <span class="n">library</span> <span class="n">has</span> <span class="n">a</span> <span class="n">new</span> <span class="n">module</span><span class="p">,</span> <span class="ss">`std::collections`</span><span class="p">.</span> <span class="k">All</span> <span class="n">functionality</span>
  <span class="n">of</span> <span class="n">libcollections</span> <span class="k">is</span> <span class="n">reexported</span> <span class="n">through</span> <span class="n">this</span> <span class="n">module</span><span class="p">.</span>

<span class="n">I</span> <span class="n">would</span> <span class="k">like</span> <span class="k">to</span> <span class="n">stress</span> <span class="n">that</span> <span class="n">this</span> <span class="k">change</span> <span class="k">is</span> <span class="n">purely</span> <span class="n">cosmetic</span><span class="p">.</span> <span class="n">There</span> <span class="n">are</span> <span class="n">very</span> <span class="n">few</span>
<span class="n">alterations</span> <span class="k">to</span> <span class="n">these</span> <span class="n">primitives</span><span class="p">.</span>

<span class="n">There</span> <span class="n">are</span> <span class="n">a</span> <span class="n">number</span> <span class="n">of</span> <span class="n">notable</span> <span class="n">points</span> <span class="n">about</span> <span class="n">the</span> <span class="n">new</span> <span class="n">organization</span><span class="p">:</span>

<span class="o">*</span> <span class="n">std</span><span class="p">::</span><span class="err">{</span><span class="n">str</span><span class="p">,</span> <span class="n">slice</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">vec</span><span class="err">}</span> <span class="k">all</span> <span class="n">moved</span> <span class="k">to</span> <span class="n">libcollections</span><span class="p">.</span> <span class="n">There</span> <span class="k">is</span> <span class="n">no</span> <span class="n">reason</span>
  <span class="n">that</span> <span class="n">these</span> <span class="n">primitives</span> <span class="n">shouldn</span><span class="s1">&#39;t be necessarily usable in a freestanding</span>
<span class="s1">  context that has allocation. These are all reexported in their usual places in</span>
<span class="s1">  the standard library.</span>

<span class="s1">* The `hashmap`, and transitively the `lru_cache`, modules no longer reside in</span>
<span class="s1">  `libcollections`, but rather in libstd. The reason for this is because the</span>
<span class="s1">  `HashMap::new` contructor requires access to the OSRng for initially seeding</span>
<span class="s1">  the hash map. Beyond this requirement, there is no reason that the hashmap</span>
<span class="s1">  could not move to libcollections.</span>

<span class="s1">  I do, however, have a plan to move the hash map to the collections module. The</span>
<span class="s1">  `HashMap::new` function could be altered to require that the `H` hasher</span>
<span class="s1">  parameter ascribe to the `Default` trait, allowing the entire `hashmap` module</span>
<span class="s1">  to live in libcollections. The key idea would be that the default hasher would</span>
<span class="s1">  be different in libstd. Something along the lines of:</span>

<span class="s1">      // src/libstd/collections/mod.rs</span>

<span class="s1">      pub type HashMap&lt;K, V, H = RandomizedSipHasher&gt; =</span>
<span class="s1">            core_collections::HashMap&lt;K, V, H&gt;;</span>

<span class="s1">  This is not possible today because you cannot invoke static methods through</span>
<span class="s1">  type aliases. If we modified the compiler, however, to allow invocation of</span>
<span class="s1">  static methods through type aliases, then this type definition would</span>
<span class="s1">  essentially be switching the default hasher from `SipHasher` in libcollections</span>
<span class="s1">  to a libstd-defined `RandomizedSipHasher` type. This type&#39;</span><span class="n">s</span> <span class="ss">`Default`</span>
  <span class="n">implementation</span> <span class="n">would</span> <span class="n">randomly</span> <span class="n">seed</span> <span class="n">the</span> <span class="ss">`SipHasher`</span> <span class="n">instance</span><span class="p">,</span> <span class="k">and</span> <span class="n">otherwise</span>
  <span class="n">perform</span> <span class="n">the</span> <span class="n">same</span> <span class="k">as</span> <span class="ss">`SipHasher`</span><span class="p">.</span>

  <span class="n">This</span> <span class="n">future</span> <span class="n">state</span> <span class="n">doesn</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">seem</span> <span class="n">incredibly</span> <span class="n">far</span> <span class="n">off</span><span class="p">,</span> <span class="n">but</span> <span class="n">until</span> <span class="n">that</span> <span class="kt">time</span> <span class="n">comes</span><span class="p">,</span>
  <span class="n">the</span> <span class="n">hashmap</span> <span class="n">module</span> <span class="n">will</span> <span class="n">live</span> <span class="k">in</span> <span class="n">libstd</span> <span class="k">to</span> <span class="k">not</span> <span class="n">compromise</span> <span class="k">on</span> <span class="n">functionality</span><span class="p">.</span>

<span class="o">*</span> <span class="k">In</span> <span class="n">preparation</span> <span class="k">for</span> <span class="n">the</span> <span class="n">hashmap</span> <span class="n">moving</span> <span class="k">to</span> <span class="n">libcollections</span><span class="p">,</span> <span class="n">the</span> <span class="ss">`hash`</span> <span class="n">module</span> <span class="n">has</span>
  <span class="n">moved</span> <span class="k">from</span> <span class="n">libstd</span> <span class="k">to</span> <span class="n">libcollections</span><span class="p">.</span> <span class="n">A</span> <span class="n">previously</span> <span class="n">snapshotted</span> <span class="n">commit</span> <span class="n">enables</span> <span class="n">a</span>
  <span class="k">distinct</span> <span class="ss">`Writer`</span> <span class="n">trait</span> <span class="k">to</span> <span class="n">live</span> <span class="k">in</span> <span class="n">the</span> <span class="ss">`hash`</span> <span class="n">module</span> <span class="n">which</span> <span class="ss">`Hash`</span>
  <span class="n">implementations</span> <span class="n">are</span> <span class="n">now</span> <span class="n">parameterized</span> <span class="n">over</span><span class="p">.</span>

  <span class="n">Due</span> <span class="k">to</span> <span class="k">using</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">trait</span><span class="p">,</span> <span class="n">the</span> <span class="ss">`SipHasher`</span> <span class="n">implementation</span> <span class="n">has</span> <span class="n">lost</span> <span class="n">its</span>
  <span class="n">specialized</span> <span class="n">methods</span> <span class="k">for</span> <span class="n">writing</span> <span class="n">integers</span><span class="p">.</span> <span class="n">These</span> <span class="n">can</span> <span class="n">be</span> <span class="n">re</span><span class="o">-</span><span class="n">added</span>
  <span class="n">backwards</span><span class="o">-</span><span class="n">compatibly</span> <span class="k">in</span> <span class="n">the</span> <span class="n">future</span> <span class="n">via</span> <span class="k">default</span> <span class="n">methods</span> <span class="k">if</span> <span class="n">necessary</span><span class="p">,</span> <span class="n">but</span> <span class="n">the</span>
  <span class="n">FNV</span> <span class="n">hashing</span> <span class="n">should</span> <span class="n">satisfy</span> <span class="n">much</span> <span class="n">of</span> <span class="n">the</span> <span class="n">need</span> <span class="k">for</span> <span class="n">speedier</span> <span class="n">hashing</span><span class="p">.</span>

<span class="n">A</span> <span class="n">list</span> <span class="n">of</span> <span class="n">breaking</span> <span class="n">changes</span><span class="p">:</span>

<span class="o">*</span> <span class="n">HashMap</span><span class="p">::</span><span class="err">{</span><span class="n">get</span><span class="p">,</span> <span class="n">get_mut</span><span class="err">}</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">fails</span> <span class="k">with</span> <span class="n">the</span> <span class="k">key</span> <span class="n">formatted</span> <span class="k">into</span> <span class="n">the</span> <span class="n">error</span>
  <span class="n">message</span> <span class="k">with</span> <span class="ss">`{:?}`</span><span class="p">,</span> <span class="n">instead</span><span class="p">,</span> <span class="n">a</span> <span class="n">generic</span> <span class="n">message</span> <span class="k">is</span> <span class="n">printed</span><span class="p">.</span> <span class="k">With</span> <span class="n">backtraces</span><span class="p">,</span>
  <span class="n">it</span> <span class="n">should</span> <span class="n">still</span> <span class="n">be</span> <span class="k">not</span><span class="o">-</span><span class="n">too</span><span class="o">-</span><span class="n">hard</span> <span class="k">to</span> <span class="n">track</span> <span class="n">down</span> <span class="n">errors</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">HashMap</span><span class="p">,</span> <span class="n">HashSet</span><span class="p">,</span> <span class="k">and</span> <span class="n">LruCache</span> <span class="n">types</span> <span class="n">are</span> <span class="n">now</span> <span class="n">available</span> <span class="n">through</span>
  <span class="n">std</span><span class="p">::</span><span class="n">collections</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">the</span> <span class="n">collections</span> <span class="n">crate</span><span class="p">.</span>

<span class="o">*</span> <span class="n">Manual</span> <span class="n">implementations</span> <span class="n">of</span> <span class="n">hash</span> <span class="n">should</span> <span class="n">be</span> <span class="n">parameterized</span> <span class="n">over</span> <span class="ss">`hash::Writer`</span>
  <span class="n">instead</span> <span class="n">of</span> <span class="n">just</span> <span class="ss">`Writer`</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>std: Recreate a <code>collections</code> module</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">As</span> <span class="k">with</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">commit</span> <span class="k">with</span> <span class="ss">`librand`</span><span class="p">,</span> <span class="n">this</span> <span class="n">commit</span> <span class="n">shuffles</span> <span class="n">around</span> <span class="n">some</span>
<span class="ss">`collections`</span> <span class="n">code</span><span class="p">.</span> <span class="n">The</span> <span class="n">new</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">world</span> <span class="k">is</span> <span class="n">similar</span> <span class="k">to</span> <span class="n">that</span> <span class="n">of</span> <span class="n">librand</span><span class="p">:</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">libcollections</span> <span class="n">crate</span> <span class="n">now</span> <span class="n">only</span> <span class="n">depends</span> <span class="k">on</span> <span class="n">libcore</span> <span class="k">and</span> <span class="n">liballoc</span><span class="p">.</span>
<span class="o">*</span> <span class="n">The</span> <span class="n">standard</span> <span class="n">library</span> <span class="n">has</span> <span class="n">a</span> <span class="n">new</span> <span class="n">module</span><span class="p">,</span> <span class="ss">`std::collections`</span><span class="p">.</span> <span class="k">All</span> <span class="n">functionality</span>
  <span class="n">of</span> <span class="n">libcollections</span> <span class="k">is</span> <span class="n">reexported</span> <span class="n">through</span> <span class="n">this</span> <span class="n">module</span><span class="p">.</span>

<span class="n">I</span> <span class="n">would</span> <span class="k">like</span> <span class="k">to</span> <span class="n">stress</span> <span class="n">that</span> <span class="n">this</span> <span class="k">change</span> <span class="k">is</span> <span class="n">purely</span> <span class="n">cosmetic</span><span class="p">.</span> <span class="n">There</span> <span class="n">are</span> <span class="n">very</span> <span class="n">few</span>
<span class="n">alterations</span> <span class="k">to</span> <span class="n">these</span> <span class="n">primitives</span><span class="p">.</span>

<span class="n">There</span> <span class="n">are</span> <span class="n">a</span> <span class="n">number</span> <span class="n">of</span> <span class="n">notable</span> <span class="n">points</span> <span class="n">about</span> <span class="n">the</span> <span class="n">new</span> <span class="n">organization</span><span class="p">:</span>

<span class="o">*</span> <span class="n">std</span><span class="p">::</span><span class="err">{</span><span class="n">str</span><span class="p">,</span> <span class="n">slice</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">vec</span><span class="err">}</span> <span class="k">all</span> <span class="n">moved</span> <span class="k">to</span> <span class="n">libcollections</span><span class="p">.</span> <span class="n">There</span> <span class="k">is</span> <span class="n">no</span> <span class="n">reason</span>
  <span class="n">that</span> <span class="n">these</span> <span class="n">primitives</span> <span class="n">shouldn</span><span class="s1">&#39;t be necessarily usable in a freestanding</span>
<span class="s1">  context that has allocation. These are all reexported in their usual places in</span>
<span class="s1">  the standard library.</span>

<span class="s1">* The `hashmap`, and transitively the `lru_cache`, modules no longer reside in</span>
<span class="s1">  `libcollections`, but rather in libstd. The reason for this is because the</span>
<span class="s1">  `HashMap::new` contructor requires access to the OSRng for initially seeding</span>
<span class="s1">  the hash map. Beyond this requirement, there is no reason that the hashmap</span>
<span class="s1">  could not move to libcollections.</span>

<span class="s1">  I do, however, have a plan to move the hash map to the collections module. The</span>
<span class="s1">  `HashMap::new` function could be altered to require that the `H` hasher</span>
<span class="s1">  parameter ascribe to the `Default` trait, allowing the entire `hashmap` module</span>
<span class="s1">  to live in libcollections. The key idea would be that the default hasher would</span>
<span class="s1">  be different in libstd. Something along the lines of:</span>

<span class="s1">      // src/libstd/collections/mod.rs</span>

<span class="s1">      pub type HashMap&lt;K, V, H = RandomizedSipHasher&gt; =</span>
<span class="s1">            core_collections::HashMap&lt;K, V, H&gt;;</span>

<span class="s1">  This is not possible today because you cannot invoke static methods through</span>
<span class="s1">  type aliases. If we modified the compiler, however, to allow invocation of</span>
<span class="s1">  static methods through type aliases, then this type definition would</span>
<span class="s1">  essentially be switching the default hasher from `SipHasher` in libcollections</span>
<span class="s1">  to a libstd-defined `RandomizedSipHasher` type. This type&#39;</span><span class="n">s</span> <span class="ss">`Default`</span>
  <span class="n">implementation</span> <span class="n">would</span> <span class="n">randomly</span> <span class="n">seed</span> <span class="n">the</span> <span class="ss">`SipHasher`</span> <span class="n">instance</span><span class="p">,</span> <span class="k">and</span> <span class="n">otherwise</span>
  <span class="n">perform</span> <span class="n">the</span> <span class="n">same</span> <span class="k">as</span> <span class="ss">`SipHasher`</span><span class="p">.</span>

  <span class="n">This</span> <span class="n">future</span> <span class="n">state</span> <span class="n">doesn</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">seem</span> <span class="n">incredibly</span> <span class="n">far</span> <span class="n">off</span><span class="p">,</span> <span class="n">but</span> <span class="n">until</span> <span class="n">that</span> <span class="kt">time</span> <span class="n">comes</span><span class="p">,</span>
  <span class="n">the</span> <span class="n">hashmap</span> <span class="n">module</span> <span class="n">will</span> <span class="n">live</span> <span class="k">in</span> <span class="n">libstd</span> <span class="k">to</span> <span class="k">not</span> <span class="n">compromise</span> <span class="k">on</span> <span class="n">functionality</span><span class="p">.</span>

<span class="o">*</span> <span class="k">In</span> <span class="n">preparation</span> <span class="k">for</span> <span class="n">the</span> <span class="n">hashmap</span> <span class="n">moving</span> <span class="k">to</span> <span class="n">libcollections</span><span class="p">,</span> <span class="n">the</span> <span class="ss">`hash`</span> <span class="n">module</span> <span class="n">has</span>
  <span class="n">moved</span> <span class="k">from</span> <span class="n">libstd</span> <span class="k">to</span> <span class="n">libcollections</span><span class="p">.</span> <span class="n">A</span> <span class="n">previously</span> <span class="n">snapshotted</span> <span class="n">commit</span> <span class="n">enables</span> <span class="n">a</span>
  <span class="k">distinct</span> <span class="ss">`Writer`</span> <span class="n">trait</span> <span class="k">to</span> <span class="n">live</span> <span class="k">in</span> <span class="n">the</span> <span class="ss">`hash`</span> <span class="n">module</span> <span class="n">which</span> <span class="ss">`Hash`</span>
  <span class="n">implementations</span> <span class="n">are</span> <span class="n">now</span> <span class="n">parameterized</span> <span class="n">over</span><span class="p">.</span>

  <span class="n">Due</span> <span class="k">to</span> <span class="k">using</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">trait</span><span class="p">,</span> <span class="n">the</span> <span class="ss">`SipHasher`</span> <span class="n">implementation</span> <span class="n">has</span> <span class="n">lost</span> <span class="n">its</span>
  <span class="n">specialized</span> <span class="n">methods</span> <span class="k">for</span> <span class="n">writing</span> <span class="n">integers</span><span class="p">.</span> <span class="n">These</span> <span class="n">can</span> <span class="n">be</span> <span class="n">re</span><span class="o">-</span><span class="n">added</span>
  <span class="n">backwards</span><span class="o">-</span><span class="n">compatibly</span> <span class="k">in</span> <span class="n">the</span> <span class="n">future</span> <span class="n">via</span> <span class="k">default</span> <span class="n">methods</span> <span class="k">if</span> <span class="n">necessary</span><span class="p">,</span> <span class="n">but</span> <span class="n">the</span>
  <span class="n">FNV</span> <span class="n">hashing</span> <span class="n">should</span> <span class="n">satisfy</span> <span class="n">much</span> <span class="n">of</span> <span class="n">the</span> <span class="n">need</span> <span class="k">for</span> <span class="n">speedier</span> <span class="n">hashing</span><span class="p">.</span>

<span class="n">A</span> <span class="n">list</span> <span class="n">of</span> <span class="n">breaking</span> <span class="n">changes</span><span class="p">:</span>

<span class="o">*</span> <span class="n">HashMap</span><span class="p">::</span><span class="err">{</span><span class="n">get</span><span class="p">,</span> <span class="n">get_mut</span><span class="err">}</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">fails</span> <span class="k">with</span> <span class="n">the</span> <span class="k">key</span> <span class="n">formatted</span> <span class="k">into</span> <span class="n">the</span> <span class="n">error</span>
  <span class="n">message</span> <span class="k">with</span> <span class="ss">`{:?}`</span><span class="p">,</span> <span class="n">instead</span><span class="p">,</span> <span class="n">a</span> <span class="n">generic</span> <span class="n">message</span> <span class="k">is</span> <span class="n">printed</span><span class="p">.</span> <span class="k">With</span> <span class="n">backtraces</span><span class="p">,</span>
  <span class="n">it</span> <span class="n">should</span> <span class="n">still</span> <span class="n">be</span> <span class="k">not</span><span class="o">-</span><span class="n">too</span><span class="o">-</span><span class="n">hard</span> <span class="k">to</span> <span class="n">track</span> <span class="n">down</span> <span class="n">errors</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">HashMap</span><span class="p">,</span> <span class="n">HashSet</span><span class="p">,</span> <span class="k">and</span> <span class="n">LruCache</span> <span class="n">types</span> <span class="n">are</span> <span class="n">now</span> <span class="n">available</span> <span class="n">through</span>
  <span class="n">std</span><span class="p">::</span><span class="n">collections</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">the</span> <span class="n">collections</span> <span class="n">crate</span><span class="p">.</span>

<span class="o">*</span> <span class="n">Manual</span> <span class="n">implementations</span> <span class="n">of</span> <span class="n">hash</span> <span class="n">should</span> <span class="n">be</span> <span class="n">parameterized</span> <span class="n">over</span> <span class="ss">`hash::Writer`</span>
  <span class="n">instead</span> <span class="n">of</span> <span class="n">just</span> <span class="ss">`Writer`</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>auto merge of #14610 : alexcrichton/rust/issue-14008, r=brson</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">commit</span> <span class="n">removes</span> <span class="n">the</span> <span class="o">&lt;</span><span class="n">M</span><span class="p">:</span> <span class="n">Any</span> <span class="o">+</span> <span class="n">Send</span><span class="o">&gt;</span> <span class="n">type</span> <span class="n">parameter</span> <span class="k">from</span> <span class="k">Option</span><span class="p">::</span><span class="n">expect</span> <span class="k">in</span>
<span class="n">favor</span> <span class="n">of</span> <span class="n">just</span> <span class="n">taking</span> <span class="n">a</span> <span class="n">hard</span><span class="o">-</span><span class="n">coded</span> <span class="ss">`&amp;str`</span> <span class="n">argument</span><span class="p">.</span> <span class="n">This</span> <span class="n">allows</span> <span class="n">this</span> <span class="n">function</span> <span class="k">to</span>
<span class="n">move</span> <span class="k">into</span> <span class="n">libcore</span><span class="p">.</span>

<span class="n">Previous</span> <span class="n">code</span> <span class="k">using</span> <span class="n">strings</span> <span class="k">with</span> <span class="ss">`expect`</span> <span class="n">will</span> <span class="k">continue</span> <span class="k">to</span> <span class="n">work</span><span class="p">,</span> <span class="n">but</span> <span class="n">code</span> <span class="k">using</span>
<span class="n">this</span> <span class="n">implicitly</span> <span class="k">to</span> <span class="n">transmit</span> <span class="n">task</span> <span class="n">failure</span> <span class="n">will</span> <span class="n">need</span> <span class="k">to</span> <span class="n">unwrap</span> <span class="n">manually</span> <span class="k">with</span> <span class="n">a</span>
<span class="ss">`match`</span> <span class="n">statement</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
<span class="n">Closes</span> <span class="c1">#14008</span>
</code></pre></div>

<ul>
<li>std: Remove generics from Option::expect</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">commit</span> <span class="n">removes</span> <span class="n">the</span> <span class="o">&lt;</span><span class="n">M</span><span class="p">:</span> <span class="n">Any</span> <span class="o">+</span> <span class="n">Send</span><span class="o">&gt;</span> <span class="n">type</span> <span class="n">parameter</span> <span class="k">from</span> <span class="k">Option</span><span class="p">::</span><span class="n">expect</span> <span class="k">in</span>
<span class="n">favor</span> <span class="n">of</span> <span class="n">just</span> <span class="n">taking</span> <span class="n">a</span> <span class="n">hard</span><span class="o">-</span><span class="n">coded</span> <span class="ss">`&amp;str`</span> <span class="n">argument</span><span class="p">.</span> <span class="n">This</span> <span class="n">allows</span> <span class="n">this</span> <span class="n">function</span> <span class="k">to</span>
<span class="n">move</span> <span class="k">into</span> <span class="n">libcore</span><span class="p">.</span>

<span class="n">Previous</span> <span class="n">code</span> <span class="k">using</span> <span class="n">strings</span> <span class="k">with</span> <span class="ss">`expect`</span> <span class="n">will</span> <span class="k">continue</span> <span class="k">to</span> <span class="n">work</span><span class="p">,</span> <span class="n">but</span> <span class="n">code</span> <span class="k">using</span>
<span class="n">this</span> <span class="n">implicitly</span> <span class="k">to</span> <span class="n">transmit</span> <span class="n">task</span> <span class="n">failure</span> <span class="n">will</span> <span class="n">need</span> <span class="k">to</span> <span class="n">unwrap</span> <span class="n">manually</span> <span class="k">with</span> <span class="n">a</span>
<span class="ss">`match`</span> <span class="n">statement</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
<span class="n">Closes</span> <span class="c1">#14008</span>
</code></pre></div>

<ul>
<li>std: Drop Total from Total{Eq,Ord}</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">completes</span> <span class="n">the</span> <span class="k">last</span> <span class="n">stage</span> <span class="k">of</span> <span class="n">the</span> <span class="n">renaming</span> <span class="k">of</span> <span class="n">the</span> <span class="n">comparison</span> <span class="k">hierarchy</span> <span class="k">of</span>
<span class="n">traits</span><span class="p">.</span> <span class="n">This</span> <span class="n">change</span> <span class="n">renames</span> <span class="n">TotalEq</span> <span class="k">to</span> <span class="n">Eq</span> <span class="k">and</span> <span class="n">TotalOrd</span> <span class="k">to</span> <span class="n">Ord</span><span class="p">.</span>

<span class="k">In</span> <span class="n">the</span> <span class="n">future</span> <span class="n">the</span> <span class="k">new</span> <span class="n">Eq</span><span class="o">/</span><span class="n">Ord</span> <span class="n">will</span> <span class="n">be</span> <span class="n">filled</span> <span class="k">out</span> <span class="k">with</span> <span class="n">their</span> <span class="n">appropriate</span> <span class="n">methods</span><span class="p">,</span>
<span class="n">but</span> <span class="k">for</span> <span class="n">now</span> <span class="n">this</span> <span class="n">change</span> <span class="k">is</span> <span class="n">purely</span> <span class="n">a</span> <span class="n">renaming</span> <span class="n">change</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>auto merge of #14556 : sfackler/rust/kill-workcache, r=alexcrichton</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">was</span> <span class="k">only</span> <span class="n">ever</span> <span class="n">used</span> <span class="k">by</span> <span class="n">rustpkg</span> <span class="k">and</span> <span class="k">is</span> <span class="n">very</span> <span class="n">unmaintained</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>Remove libworkcache</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">was</span> <span class="k">only</span> <span class="n">ever</span> <span class="n">used</span> <span class="k">by</span> <span class="n">rustpkg</span> <span class="k">and</span> <span class="k">is</span> <span class="n">very</span> <span class="n">unmaintained</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>std: Rename {Eq,Ord} to Partial{Eq,Ord}</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="k">is</span> <span class="n">part</span> <span class="k">of</span> <span class="n">the</span> <span class="n">ongoing</span> <span class="n">renaming</span> <span class="k">of</span> <span class="n">the</span> <span class="n">equality</span> <span class="n">traits</span><span class="p">.</span> <span class="n">See</span> <span class="o">#</span><span class="mi">12517</span> <span class="k">for</span> <span class="k">more</span>
<span class="n">details</span><span class="p">.</span> <span class="k">All</span> <span class="n">code</span> <span class="k">using</span> <span class="n">Eq</span><span class="o">/</span><span class="n">Ord</span> <span class="n">will</span> <span class="n">temporarily</span> <span class="n">need</span> <span class="k">to</span> <span class="k">move</span> <span class="k">to</span> <span class="k">Partial</span><span class="err">{</span><span class="n">Eq</span><span class="p">,</span><span class="n">Ord</span><span class="err">}</span>
<span class="k">or</span> <span class="n">the</span> <span class="n">Total</span><span class="err">{</span><span class="n">Eq</span><span class="p">,</span><span class="n">Ord</span><span class="err">}</span> <span class="n">traits</span><span class="p">.</span> <span class="n">The</span> <span class="n">Total</span> <span class="n">traits</span> <span class="n">will</span> <span class="n">soon</span> <span class="n">be</span> <span class="n">renamed</span> <span class="k">to</span> <span class="err">{</span><span class="n">Eq</span><span class="p">,</span><span class="n">Ord</span><span class="err">}</span><span class="p">.</span>

<span class="n">cc</span> <span class="o">#</span><span class="mi">12517</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>librustc: Fix snake case errors.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">A</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">functions</span><span class="o">/</span><span class="n">methods</span> <span class="n">have</span> <span class="n">been</span> <span class="n">moved</span> <span class="k">or</span> <span class="n">renamed</span> <span class="k">to</span> <span class="n">align</span>
<span class="n">better</span> <span class="k">with</span> <span class="n">rust</span> <span class="n">standard</span> <span class="n">conventions</span><span class="p">.</span>

<span class="n">rustc</span><span class="p">::</span><span class="n">back</span><span class="p">::</span><span class="n">link</span><span class="p">::</span><span class="n">WriteOutputFile</span> <span class="o">=&gt;</span> <span class="n">write_output_file</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">ty</span><span class="p">::</span><span class="n">EmptyBuiltinBounds</span> <span class="o">=&gt;</span> <span class="n">empty_builtin_bounds</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">ty</span><span class="p">::</span><span class="n">AllBuiltinBounds</span> <span class="o">=&gt;</span> <span class="n">all_builtin_bounds</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">liveness</span><span class="p">::</span><span class="n">IrMaps</span> <span class="o">=&gt;</span> <span class="n">IrMaps</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">liveness</span><span class="p">::</span><span class="n">Liveness</span> <span class="o">=&gt;</span> <span class="n">Liveness</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">resolve</span><span class="p">::</span><span class="n">NameBindings</span> <span class="o">=&gt;</span> <span class="n">NameBindings</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">resolve</span><span class="p">::</span><span class="n">PrimitiveTypeTable</span> <span class="o">=&gt;</span> <span class="n">PrimitiveTypeTable</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">resolve</span><span class="p">::</span><span class="n">Resolver</span> <span class="o">=&gt;</span> <span class="n">Resolver</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">trans</span><span class="p">::</span><span class="n">datum</span><span class="p">::</span><span class="n">Datum</span> <span class="o">=&gt;</span> <span class="n">Datum</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">trans</span><span class="p">::</span><span class="n">datum</span><span class="p">::</span><span class="n">DatumBlock</span> <span class="o">=&gt;</span> <span class="n">DatumBlock</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">trans</span><span class="p">::</span><span class="n">datum</span><span class="p">::</span><span class="n">Rvalue</span> <span class="o">=&gt;</span> <span class="n">Rvalue</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">typeck</span><span class="p">::</span><span class="n">infer</span><span class="p">::</span><span class="n">new_ValsAndBindings</span> <span class="o">=&gt;</span> <span class="p">::</span><span class="n">infer</span><span class="p">::</span><span class="n">unify</span><span class="p">::</span><span class="n">ValsAndBindings</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustc</span><span class="p">::</span><span class="n">middle</span><span class="p">::</span><span class="n">typeck</span><span class="p">::</span><span class="n">infer</span><span class="p">::</span><span class="n">region_inference</span><span class="p">::</span><span class="n">RegionVarBindings</span> <span class="o">=&gt;</span> <span class="n">RegionVarBindings</span><span class="p">::</span><span class="k">new</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>lib{serialize, uuid}: Fix snake case errors.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">A</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">functions</span><span class="o">/</span><span class="n">methods</span> <span class="n">have</span> <span class="n">been</span> <span class="n">moved</span> <span class="k">or</span> <span class="n">renamed</span> <span class="k">to</span> <span class="n">align</span>
<span class="n">better</span> <span class="k">with</span> <span class="n">rust</span> <span class="n">standard</span> <span class="n">conventions</span><span class="p">.</span>

<span class="n">serialize</span><span class="p">::</span><span class="n">ebml</span><span class="p">::</span><span class="n">reader</span><span class="p">::</span><span class="n">Doc</span> <span class="o">=&gt;</span> <span class="n">seriaize</span><span class="p">::</span><span class="n">ebml</span><span class="p">::</span><span class="n">Doc</span><span class="p">::</span><span class="k">new</span>
<span class="n">serialize</span><span class="p">::</span><span class="n">ebml</span><span class="p">::</span><span class="n">reader</span><span class="p">::</span><span class="n">Decoder</span> <span class="o">=&gt;</span> <span class="n">Decoder</span><span class="p">::</span><span class="k">new</span>
<span class="n">serialize</span><span class="p">::</span><span class="n">ebml</span><span class="p">::</span><span class="n">writer</span><span class="p">::</span><span class="n">Encoder</span> <span class="o">=&gt;</span> <span class="n">Encoder</span><span class="p">::</span><span class="k">new</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>lib{std,core,debug,rustuv,collections,native,regex}: Fix <code>snake_case</code> errors.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">A</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">functions</span><span class="o">/</span><span class="n">methods</span> <span class="n">have</span> <span class="n">been</span> <span class="n">moved</span> <span class="k">or</span> <span class="n">renamed</span> <span class="k">to</span> <span class="n">align</span>
<span class="n">better</span> <span class="k">with</span> <span class="n">rust</span> <span class="n">standard</span> <span class="n">conventions</span><span class="p">.</span>

<span class="n">std</span><span class="p">::</span><span class="n">reflect</span><span class="p">::</span><span class="n">MovePtrAdaptor</span> <span class="o">=&gt;</span> <span class="n">MovePtrAdaptor</span><span class="p">::</span><span class="k">new</span>
<span class="n">debug</span><span class="p">::</span><span class="n">reflect</span><span class="p">::</span><span class="n">MovePtrAdaptor</span> <span class="o">=&gt;</span> <span class="n">MovePtrAdaptor</span><span class="p">::</span><span class="k">new</span>
<span class="n">std</span><span class="p">::</span><span class="n">repr</span><span class="p">::</span><span class="n">ReprVisitor</span> <span class="o">=&gt;</span> <span class="n">ReprVisitor</span><span class="p">::</span><span class="k">new</span>
<span class="n">debug</span><span class="p">::</span><span class="n">repr</span><span class="p">::</span><span class="n">ReprVisitor</span> <span class="o">=&gt;</span> <span class="n">ReprVisitor</span><span class="p">::</span><span class="k">new</span>
<span class="n">rustuv</span><span class="p">::</span><span class="n">homing</span><span class="p">::</span><span class="n">HomingIO</span><span class="p">.</span><span class="n">go_to_IO_home</span> <span class="o">=&gt;</span> <span class="n">go_to_io_home</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>libsyntax: Fix <code>snake_case</code> errors.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">A</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">functions</span><span class="o">/</span><span class="n">methods</span> <span class="n">have</span> <span class="n">been</span> <span class="n">moved</span> <span class="k">or</span> <span class="n">renamed</span> <span class="k">to</span> <span class="n">align</span>
<span class="n">better</span> <span class="k">with</span> <span class="n">rust</span> <span class="n">standard</span> <span class="n">conventions</span><span class="p">.</span>

<span class="n">syntax</span><span class="p">::</span><span class="n">ext</span><span class="p">::</span><span class="n">mtwt</span><span class="p">::</span><span class="n">xorPush</span> <span class="o">=&gt;</span> <span class="n">xor_push</span>
<span class="n">syntax</span><span class="p">::</span><span class="n">parse</span><span class="p">::</span><span class="n">parser</span><span class="p">::</span><span class="n">Parser</span> <span class="o">=&gt;</span> <span class="n">Parser</span><span class="p">::</span><span class="k">new</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>auto merge of #14511 : Sawyer47/rust/osrng-rename, r=alexcrichton</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">According</span> <span class="k">to</span> <span class="n">Rust</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">style</span> <span class="n">guide</span> <span class="n">acronyms</span> <span class="k">in</span> <span class="k">type</span> <span class="k">names</span> <span class="n">should</span> <span class="n">be</span>
<span class="n">CamelCase</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>Rename OSRng to OsRng</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">According</span> <span class="k">to</span> <span class="n">Rust</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">style</span> <span class="n">guide</span> <span class="n">acronyms</span> <span class="k">in</span> <span class="k">type</span> <span class="k">names</span> <span class="n">should</span> <span class="n">be</span>
<span class="n">CamelCase</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>auto merge of #14427 : alexcrichton/rust/librand, r=huonw</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">commit</span> <span class="n">shuffles</span> <span class="n">around</span> <span class="n">some</span> <span class="n">of</span> <span class="n">the</span> <span class="ss">`rand`</span> <span class="n">code</span><span class="p">,</span> <span class="n">along</span> <span class="k">with</span> <span class="n">some</span>
<span class="n">reorganization</span><span class="p">.</span> <span class="n">The</span> <span class="n">new</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">world</span> <span class="k">is</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">librand</span> <span class="n">crate</span> <span class="n">now</span> <span class="n">only</span> <span class="n">depends</span> <span class="k">on</span> <span class="n">libcore</span><span class="p">.</span> <span class="n">This</span> <span class="n">interface</span> <span class="k">is</span> <span class="n">experimental</span><span class="p">.</span>
<span class="o">*</span> <span class="n">The</span> <span class="n">standard</span> <span class="n">library</span> <span class="n">has</span> <span class="n">a</span> <span class="n">new</span> <span class="n">module</span><span class="p">,</span> <span class="ss">`std::rand`</span><span class="p">.</span> <span class="n">This</span> <span class="n">interface</span> <span class="n">will</span>
  <span class="n">eventually</span> <span class="n">become</span> <span class="n">stable</span><span class="p">.</span>

<span class="n">Unfortunately</span><span class="p">,</span> <span class="n">this</span> <span class="n">entailed</span> <span class="n">more</span> <span class="n">of</span> <span class="n">a</span> <span class="n">breaking</span> <span class="k">change</span> <span class="n">than</span> <span class="n">just</span> <span class="n">shuffling</span> <span class="n">some</span>
<span class="n">names</span> <span class="n">around</span><span class="p">.</span> <span class="n">The</span> <span class="n">following</span> <span class="n">breaking</span> <span class="n">changes</span> <span class="n">were</span> <span class="n">made</span> <span class="k">to</span> <span class="n">the</span> <span class="n">rand</span> <span class="n">library</span><span class="p">:</span>

<span class="o">*</span> <span class="n">Rng</span><span class="p">::</span><span class="nf">gen_vec</span><span class="p">()</span> <span class="n">was</span> <span class="n">removed</span><span class="p">.</span> <span class="n">This</span> <span class="n">has</span> <span class="n">been</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">Rng</span><span class="p">::</span><span class="nf">gen_iter</span><span class="p">()</span> <span class="n">which</span>
  <span class="n">will</span> <span class="k">return</span> <span class="n">an</span> <span class="n">infinite</span> <span class="n">stream</span> <span class="n">of</span> <span class="n">random</span> <span class="k">values</span><span class="p">.</span> <span class="n">Previous</span> <span class="n">behavior</span> <span class="n">can</span> <span class="n">be</span>
  <span class="n">regained</span> <span class="k">with</span> <span class="ss">`rng.gen_iter().take(n).collect()`</span>

<span class="o">*</span> <span class="n">Rng</span><span class="p">::</span><span class="nf">gen_ascii_str</span><span class="p">()</span> <span class="n">was</span> <span class="n">removed</span><span class="p">.</span> <span class="n">This</span> <span class="n">has</span> <span class="n">been</span> <span class="n">replaced</span> <span class="k">with</span>
  <span class="n">Rng</span><span class="p">::</span><span class="nf">gen_ascii_chars</span><span class="p">()</span> <span class="n">which</span> <span class="n">will</span> <span class="k">return</span> <span class="n">an</span> <span class="n">infinite</span> <span class="n">stream</span> <span class="n">of</span> <span class="n">random</span> <span class="n">ascii</span>
  <span class="n">characters</span><span class="p">.</span> <span class="n">Similarly</span> <span class="k">to</span> <span class="nf">gen_iter</span><span class="p">(),</span> <span class="n">previous</span> <span class="n">behavior</span> <span class="n">can</span> <span class="n">be</span> <span class="n">emulated</span> <span class="k">with</span>
  <span class="ss">`rng.gen_ascii_chars().take(n).collect()`</span>

<span class="o">*</span> <span class="err">{</span><span class="n">IsaacRng</span><span class="p">,</span> <span class="n">Isaac64Rng</span><span class="p">,</span> <span class="n">XorShiftRng</span><span class="err">}</span><span class="p">::</span><span class="nf">new</span><span class="p">()</span> <span class="n">have</span> <span class="k">all</span> <span class="n">been</span> <span class="n">removed</span><span class="p">.</span> <span class="n">These</span> <span class="k">all</span>
  <span class="n">relied</span> <span class="k">on</span> <span class="n">being</span> <span class="n">able</span> <span class="k">to</span> <span class="k">use</span> <span class="n">an</span> <span class="n">OSRng</span> <span class="k">for</span> <span class="n">seeding</span><span class="p">,</span> <span class="n">but</span> <span class="n">this</span> <span class="k">is</span> <span class="n">no</span> <span class="n">longer</span>
  <span class="n">available</span> <span class="k">in</span> <span class="nf">librand</span> <span class="p">(</span><span class="k">where</span> <span class="n">these</span> <span class="n">types</span> <span class="n">are</span> <span class="n">defined</span><span class="p">).</span> <span class="k">To</span> <span class="n">retain</span> <span class="n">the</span> <span class="n">same</span>
  <span class="n">functionality</span><span class="p">,</span> <span class="n">these</span> <span class="n">types</span> <span class="n">now</span> <span class="n">implement</span> <span class="n">the</span> <span class="ss">`Rand`</span> <span class="n">trait</span> <span class="n">so</span> <span class="n">they</span> <span class="n">can</span> <span class="n">be</span>
  <span class="n">generated</span> <span class="k">with</span> <span class="n">a</span> <span class="n">random</span> <span class="n">seed</span> <span class="k">from</span> <span class="n">another</span> <span class="n">random</span> <span class="n">number</span> <span class="n">generator</span><span class="p">.</span> <span class="n">This</span> <span class="n">allows</span>
  <span class="n">the</span> <span class="n">stdlib</span> <span class="k">to</span> <span class="k">use</span> <span class="n">an</span> <span class="n">OSRng</span> <span class="k">to</span> <span class="k">create</span> <span class="n">seeded</span> <span class="n">instances</span> <span class="n">of</span> <span class="n">these</span> <span class="n">RNGs</span><span class="p">.</span>

<span class="o">*</span> <span class="n">Rand</span> <span class="n">implementations</span> <span class="k">for</span> <span class="ss">`Box&lt;T&gt;`</span> <span class="k">and</span> <span class="ss">`@T`</span> <span class="n">were</span> <span class="n">removed</span><span class="p">.</span> <span class="n">These</span> <span class="n">seemed</span> <span class="k">to</span> <span class="n">be</span>
  <span class="n">pretty</span> <span class="n">rare</span> <span class="k">in</span> <span class="n">the</span> <span class="n">codebase</span><span class="p">,</span> <span class="k">and</span> <span class="n">it</span> <span class="n">allows</span> <span class="k">for</span> <span class="n">libcore</span> <span class="k">to</span> <span class="k">not</span> <span class="n">depend</span> <span class="k">on</span>
  <span class="n">liballoc</span><span class="p">.</span>  <span class="n">Additionally</span><span class="p">,</span> <span class="n">other</span> <span class="n">pointer</span> <span class="n">types</span> <span class="k">like</span> <span class="n">Rc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="k">and</span> <span class="n">Arc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">were</span> <span class="k">not</span>
  <span class="n">supported</span><span class="p">.</span>  <span class="k">If</span> <span class="n">this</span> <span class="k">is</span> <span class="n">undesirable</span><span class="p">,</span> <span class="n">librand</span> <span class="n">can</span> <span class="n">depend</span> <span class="k">on</span> <span class="n">liballoc</span> <span class="k">and</span> <span class="n">regain</span>
  <span class="n">these</span> <span class="n">implementations</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">WeightedChoice</span> <span class="n">structure</span> <span class="k">is</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">built</span> <span class="k">with</span> <span class="n">a</span> <span class="ss">`Vec&lt;Weighted&lt;T&gt;&gt;`</span><span class="p">,</span>
   <span class="n">but</span> <span class="n">rather</span> <span class="n">a</span> <span class="ss">`&amp;mut [Weighted&lt;T&gt;]`</span><span class="p">.</span> <span class="n">This</span> <span class="n">means</span> <span class="n">that</span> <span class="n">the</span> <span class="n">WeightedChoice</span>
   <span class="n">structure</span> <span class="n">now</span> <span class="n">has</span> <span class="n">a</span> <span class="n">lifetime</span> <span class="n">associated</span> <span class="k">with</span> <span class="n">it</span><span class="p">.</span>

<span class="n">cc</span> <span class="c1">#13851</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>std: Recreate a <code>rand</code> module</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="n">commit</span> <span class="n">shuffles</span> <span class="n">around</span> <span class="n">some</span> <span class="n">of</span> <span class="n">the</span> <span class="ss">`rand`</span> <span class="n">code</span><span class="p">,</span> <span class="n">along</span> <span class="k">with</span> <span class="n">some</span>
<span class="n">reorganization</span><span class="p">.</span> <span class="n">The</span> <span class="n">new</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">world</span> <span class="k">is</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">librand</span> <span class="n">crate</span> <span class="n">now</span> <span class="n">only</span> <span class="n">depends</span> <span class="k">on</span> <span class="n">libcore</span><span class="p">.</span> <span class="n">This</span> <span class="n">interface</span> <span class="k">is</span> <span class="n">experimental</span><span class="p">.</span>
<span class="o">*</span> <span class="n">The</span> <span class="n">standard</span> <span class="n">library</span> <span class="n">has</span> <span class="n">a</span> <span class="n">new</span> <span class="n">module</span><span class="p">,</span> <span class="ss">`std::rand`</span><span class="p">.</span> <span class="n">This</span> <span class="n">interface</span> <span class="n">will</span>
  <span class="n">eventually</span> <span class="n">become</span> <span class="n">stable</span><span class="p">.</span>

<span class="n">Unfortunately</span><span class="p">,</span> <span class="n">this</span> <span class="n">entailed</span> <span class="n">more</span> <span class="n">of</span> <span class="n">a</span> <span class="n">breaking</span> <span class="k">change</span> <span class="n">than</span> <span class="n">just</span> <span class="n">shuffling</span> <span class="n">some</span>
<span class="n">names</span> <span class="n">around</span><span class="p">.</span> <span class="n">The</span> <span class="n">following</span> <span class="n">breaking</span> <span class="n">changes</span> <span class="n">were</span> <span class="n">made</span> <span class="k">to</span> <span class="n">the</span> <span class="n">rand</span> <span class="n">library</span><span class="p">:</span>

<span class="o">*</span> <span class="ss">`Rng::gen_vec()`</span> <span class="n">was</span> <span class="n">removed</span><span class="p">.</span> <span class="n">This</span> <span class="n">has</span> <span class="n">been</span> <span class="n">replaced</span> <span class="k">with</span> <span class="ss">`Rng::gen_iter()`</span>
  <span class="n">which</span> <span class="n">will</span> <span class="k">return</span> <span class="n">an</span> <span class="n">infinite</span> <span class="n">stream</span> <span class="n">of</span> <span class="n">random</span> <span class="k">values</span><span class="p">.</span> <span class="n">Previous</span> <span class="n">behavior</span> <span class="n">can</span>
  <span class="n">be</span> <span class="n">regained</span> <span class="k">with</span> <span class="ss">`rng.gen_iter().take(n).collect()`</span>

<span class="o">*</span> <span class="ss">`Rng::gen_ascii_str()`</span> <span class="n">was</span> <span class="n">removed</span><span class="p">.</span> <span class="n">This</span> <span class="n">has</span> <span class="n">been</span> <span class="n">replaced</span> <span class="k">with</span>
  <span class="ss">`Rng::gen_ascii_chars()`</span> <span class="n">which</span> <span class="n">will</span> <span class="k">return</span> <span class="n">an</span> <span class="n">infinite</span> <span class="n">stream</span> <span class="n">of</span> <span class="n">random</span> <span class="n">ascii</span>
  <span class="n">characters</span><span class="p">.</span> <span class="n">Similarly</span> <span class="k">to</span> <span class="ss">`gen_iter()`</span><span class="p">,</span> <span class="n">previous</span> <span class="n">behavior</span> <span class="n">can</span> <span class="n">be</span> <span class="n">emulated</span> <span class="k">with</span>
  <span class="ss">`rng.gen_ascii_chars().take(n).collect()`</span>

<span class="o">*</span> <span class="err">{</span><span class="n">IsaacRng</span><span class="p">,</span> <span class="n">Isaac64Rng</span><span class="p">,</span> <span class="n">XorShiftRng</span><span class="err">}</span><span class="p">::</span><span class="nf">new</span><span class="p">()</span> <span class="n">have</span> <span class="k">all</span> <span class="n">been</span> <span class="n">removed</span><span class="p">.</span> <span class="n">These</span> <span class="k">all</span>
  <span class="n">relied</span> <span class="k">on</span> <span class="n">being</span> <span class="n">able</span> <span class="k">to</span> <span class="k">use</span> <span class="n">an</span> <span class="n">OSRng</span> <span class="k">for</span> <span class="n">seeding</span><span class="p">,</span> <span class="n">but</span> <span class="n">this</span> <span class="k">is</span> <span class="n">no</span> <span class="n">longer</span>
  <span class="n">available</span> <span class="k">in</span> <span class="nf">librand</span> <span class="p">(</span><span class="k">where</span> <span class="n">these</span> <span class="n">types</span> <span class="n">are</span> <span class="n">defined</span><span class="p">).</span> <span class="k">To</span> <span class="n">retain</span> <span class="n">the</span> <span class="n">same</span>
  <span class="n">functionality</span><span class="p">,</span> <span class="n">these</span> <span class="n">types</span> <span class="n">now</span> <span class="n">implement</span> <span class="n">the</span> <span class="ss">`Rand`</span> <span class="n">trait</span> <span class="n">so</span> <span class="n">they</span> <span class="n">can</span> <span class="n">be</span>
  <span class="n">generated</span> <span class="k">with</span> <span class="n">a</span> <span class="n">random</span> <span class="n">seed</span> <span class="k">from</span> <span class="n">another</span> <span class="n">random</span> <span class="n">number</span> <span class="n">generator</span><span class="p">.</span> <span class="n">This</span> <span class="n">allows</span>
  <span class="n">the</span> <span class="n">stdlib</span> <span class="k">to</span> <span class="k">use</span> <span class="n">an</span> <span class="n">OSRng</span> <span class="k">to</span> <span class="k">create</span> <span class="n">seeded</span> <span class="n">instances</span> <span class="n">of</span> <span class="n">these</span> <span class="n">RNGs</span><span class="p">.</span>

<span class="o">*</span> <span class="n">Rand</span> <span class="n">implementations</span> <span class="k">for</span> <span class="ss">`Box&lt;T&gt;`</span> <span class="k">and</span> <span class="ss">`@T`</span> <span class="n">were</span> <span class="n">removed</span><span class="p">.</span> <span class="n">These</span> <span class="n">seemed</span> <span class="k">to</span> <span class="n">be</span>
  <span class="n">pretty</span> <span class="n">rare</span> <span class="k">in</span> <span class="n">the</span> <span class="n">codebase</span><span class="p">,</span> <span class="k">and</span> <span class="n">it</span> <span class="n">allows</span> <span class="k">for</span> <span class="n">librand</span> <span class="k">to</span> <span class="k">not</span> <span class="n">depend</span> <span class="k">on</span>
  <span class="n">liballoc</span><span class="p">.</span>  <span class="n">Additionally</span><span class="p">,</span> <span class="n">other</span> <span class="n">pointer</span> <span class="n">types</span> <span class="k">like</span> <span class="n">Rc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="k">and</span> <span class="n">Arc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">were</span> <span class="k">not</span>
  <span class="n">supported</span><span class="p">.</span>  <span class="k">If</span> <span class="n">this</span> <span class="k">is</span> <span class="n">undesirable</span><span class="p">,</span> <span class="n">librand</span> <span class="n">can</span> <span class="n">depend</span> <span class="k">on</span> <span class="n">liballoc</span> <span class="k">and</span> <span class="n">regain</span>
  <span class="n">these</span> <span class="n">implementations</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="n">WeightedChoice</span> <span class="n">structure</span> <span class="k">is</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">built</span> <span class="k">with</span> <span class="n">a</span> <span class="ss">`Vec&lt;Weighted&lt;T&gt;&gt;`</span><span class="p">,</span>
  <span class="n">but</span> <span class="n">rather</span> <span class="n">a</span> <span class="ss">`&amp;mut [Weighted&lt;T&gt;]`</span><span class="p">.</span> <span class="n">This</span> <span class="n">means</span> <span class="n">that</span> <span class="n">the</span> <span class="n">WeightedChoice</span>
  <span class="n">structure</span> <span class="n">now</span> <span class="n">has</span> <span class="n">a</span> <span class="n">lifetime</span> <span class="n">associated</span> <span class="k">with</span> <span class="n">it</span><span class="p">.</span>

<span class="o">*</span> <span class="n">The</span> <span class="ss">`sample`</span> <span class="n">method</span> <span class="k">on</span> <span class="ss">`Rng`</span> <span class="n">has</span> <span class="n">been</span> <span class="n">moved</span> <span class="k">to</span> <span class="n">a</span> <span class="n">top</span><span class="o">-</span><span class="n">level</span> <span class="n">function</span> <span class="k">in</span> <span class="n">the</span>
  <span class="ss">`rand`</span> <span class="n">module</span> <span class="n">due</span> <span class="k">to</span> <span class="n">its</span> <span class="n">dependence</span> <span class="k">on</span> <span class="ss">`Vec`</span><span class="p">.</span>

<span class="n">cc</span> <span class="c1">#13851</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="k">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>Rename UTF16Item[s] to Utf16Item[s]</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">According</span> <span class="k">to</span> <span class="n">Rust</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">style</span> <span class="n">guide</span> <span class="n">acronyms</span> <span class="n">should</span> <span class="n">be</span> <span class="n">CamelCase</span><span class="p">.</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>auto merge of #14364 : alexcrichton/rust/libdebug, r=brson</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="k">commit</span> <span class="n">moves</span> <span class="n">reflection</span> <span class="p">(</span><span class="k">as</span> <span class="n">well</span> <span class="k">as</span> <span class="n">the</span> <span class="err">{</span><span class="p">:</span><span class="o">?</span><span class="err">}</span> <span class="n">format</span> <span class="n">modifier</span><span class="p">)</span> <span class="k">to</span> <span class="n">a</span> <span class="k">new</span>
<span class="n">libdebug</span> <span class="n">crate</span><span class="p">,</span> <span class="k">all</span> <span class="k">of</span> <span class="n">which</span> <span class="k">is</span> <span class="n">marked</span> <span class="n">experimental</span><span class="p">.</span>

<span class="n">This</span> <span class="k">is</span> <span class="n">a</span> <span class="n">breaking</span> <span class="n">change</span> <span class="n">because</span> <span class="n">it</span> <span class="n">now</span> <span class="n">requires</span> <span class="n">the</span> <span class="n">debug</span> <span class="n">crate</span> <span class="k">to</span> <span class="n">be</span>
<span class="n">explicitly</span> <span class="n">linked</span> <span class="k">if</span> <span class="n">the</span> <span class="p">:</span><span class="o">?</span> <span class="n">format</span> <span class="n">qualifier</span> <span class="k">is</span> <span class="n">used</span><span class="p">.</span> <span class="n">This</span> <span class="n">means</span> <span class="n">that</span> <span class="k">any</span> <span class="n">code</span>
<span class="k">using</span> <span class="n">this</span> <span class="n">feature</span> <span class="n">will</span> <span class="n">have</span> <span class="k">to</span> <span class="k">add</span> <span class="o">`</span><span class="n">extern</span> <span class="n">crate</span> <span class="n">debug</span><span class="p">;</span><span class="o">`</span> <span class="k">to</span> <span class="n">the</span> <span class="n">top</span> <span class="k">of</span> <span class="n">the</span>
<span class="n">crate</span><span class="p">.</span> <span class="k">Any</span> <span class="n">code</span> <span class="n">relying</span> <span class="k">on</span> <span class="n">reflection</span> <span class="n">will</span> <span class="n">also</span> <span class="n">need</span> <span class="k">to</span> <span class="k">do</span> <span class="n">this</span><span class="p">.</span>

<span class="n">Closes</span> <span class="o">#</span><span class="mi">12019</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>Move std::{reflect,repr,Poly} to a libdebug crate</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">This</span> <span class="k">commit</span> <span class="n">moves</span> <span class="n">reflection</span> <span class="p">(</span><span class="k">as</span> <span class="n">well</span> <span class="k">as</span> <span class="n">the</span> <span class="err">{</span><span class="p">:</span><span class="o">?</span><span class="err">}</span> <span class="n">format</span> <span class="n">modifier</span><span class="p">)</span> <span class="k">to</span> <span class="n">a</span> <span class="k">new</span>
<span class="n">libdebug</span> <span class="n">crate</span><span class="p">,</span> <span class="k">all</span> <span class="k">of</span> <span class="n">which</span> <span class="k">is</span> <span class="n">marked</span> <span class="n">experimental</span><span class="p">.</span>

<span class="n">This</span> <span class="k">is</span> <span class="n">a</span> <span class="n">breaking</span> <span class="n">change</span> <span class="n">because</span> <span class="n">it</span> <span class="n">now</span> <span class="n">requires</span> <span class="n">the</span> <span class="n">debug</span> <span class="n">crate</span> <span class="k">to</span> <span class="n">be</span>
<span class="n">explicitly</span> <span class="n">linked</span> <span class="k">if</span> <span class="n">the</span> <span class="p">:</span><span class="o">?</span> <span class="n">format</span> <span class="n">qualifier</span> <span class="k">is</span> <span class="n">used</span><span class="p">.</span> <span class="n">This</span> <span class="n">means</span> <span class="n">that</span> <span class="k">any</span> <span class="n">code</span>
<span class="k">using</span> <span class="n">this</span> <span class="n">feature</span> <span class="n">will</span> <span class="n">have</span> <span class="k">to</span> <span class="k">add</span> <span class="o">`</span><span class="n">extern</span> <span class="n">crate</span> <span class="n">debug</span><span class="p">;</span><span class="o">`</span> <span class="k">to</span> <span class="n">the</span> <span class="n">top</span> <span class="k">of</span> <span class="n">the</span>
<span class="n">crate</span><span class="p">.</span> <span class="k">Any</span> <span class="n">code</span> <span class="n">relying</span> <span class="k">on</span> <span class="n">reflection</span> <span class="n">will</span> <span class="n">also</span> <span class="n">need</span> <span class="k">to</span> <span class="k">do</span> <span class="n">this</span><span class="p">.</span>

<span class="n">Closes</span> <span class="o">#</span><span class="mi">12019</span>

<span class="p">[</span><span class="n">breaking</span><span class="o">-</span><span class="n">change</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>std: Rename strbuf operations to string</li>
<li>std: Remove <code>String::from_owned_str</code> as it's redundant</li>
</ul>
<h2>Other Changes</h2>
<ul>
<li>Primitive types <a href="https://github.com/mozilla/rust/pull/14513">now have a home in the
  documnetation</a>, where their
  methods will be listed, and the traits they implement.</li>
<li>References to owned vectors in the docs <a href="https://github.com/mozilla/rust/pull/14553">have been mercilessly
  destroyed</a>.</li>
<li>There is now a function <a href="https://github.com/mozilla/rust/pull/14544">for parsing PATH environment variable-looking
  strings</a> into their component
  paths.</li>
<li><code>Rc::make_unique</code> <a href="https://github.com/mozilla/rust/pull/14522">has been
  added</a>.</li>
<li>Debuginfo representation of enums <a href="https://github.com/mozilla/rust/pull/14486">has
  improved</a> to be more consistent.</li>
<li>Macros <a href="https://github.com/mozilla/rust/pull/14298">can now be expanded in
  patterns</a>.</li>
<li>There is now a lint <a href="https://github.com/mozilla/rust/pull/14300">that warns when one enum variant is vastly larger than
  the others</a>. It is allow by
  default.</li>
<li>Regular expressions <a href="https://github.com/mozilla/rust/pull/14423">can now be stored in
  statics</a>.</li>
<li>rustdoc <a href="https://github.com/mozilla/rust/pull/14391">will now inline
  documentation</a> for reexported
  items.</li>
<li>A new <a href="http://doc.rust-lang.org/complement-design-faq.html">language design
  FAQ</a> <a href="https://github.com/mozilla/rust/pull/14370">has been
  added</a>.</li>
</ul>
<h2>New Contributors</h2>
<ul>
<li>Ahmed Charles</li>
<li>Ariel Ben-Yehuda</li>
<li>Christoph Burgdorf</li>
<li>Florian Hartwig</li>
<li>Jonathan Reem</li>
<li>Nikita Pekin</li>
<li>Randati</li>
<li>Reilly Watson</li>
<li>Ryman</li>
<li>Santiago Rodriguez</li>
<li>Sean Gillespie</li>
<li>Sergio Benitez</li>
<li>Sylvestre Ledru</li>
<li>Tom Jakubowski</li>
<li>Utkarsh Kukreti</li>
<li>fort</li>
</ul>
<h1>New RFCs</h1>
<ul>
<li><a href="https://github.com/rust-lang/rfcs/pull/91">Coercible and HasPrefix for Zero Cost
  Coercions</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/94">Disambiguate enum variant
  names</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/97">Filling in the details around unboxed
  closures</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/98">Uninitialized pointers</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/100">Add a <code>partial_cmp</code> method to
  <code>TotalOrd</code></a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/101">Allow multiple fixed-size subslices borrows in one
  pattern</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/102">Auto-dereferencing non-raw
  pointers</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/106">Add a freestanding target</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/107">Pattern guards with
  bind-by-move</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/108">Convenience syntax for module
  imports</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/109">Remove <code>#[crate_id]</code></a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/110">Resolve <code>::foo::...</code> when compiling crates named
  <code>foo</code></a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/111">Index traits</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/112">Remove cross-borrowing</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/113">Provide a common API across <code>Option</code> and the <code>Ok</code> and <code>Err</code> variants of
  <code>Result</code></a></li>
</ul>
<h1>Community Updates</h1>
<ul>
<li><a href="http://www.reddit.com/r/rust/comments/26oxl4/are_we_web_yet_not_really/">Are we web yet? Not
  really.</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/26ss21/embedded_in_academia_we_need_hardware_traps_for/">We need hardware traps for integer
  overflow</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/26u192/piston_game_engine_update_notice_on_progress/">Piston game engine: update on
  progress</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/26xt8j/practicality_with_rust_error_handling/">Practicality with Rust: Error
  Handling</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/26z1xa/debug_validation_vs_safety/">Debug validation vs
  safety</a></li>
<li><a href="https://github.com/thestinger/rust-core">rust-core now deprecated in favor of libcore
  upstream</a></li>
<li><a href="http://bjbell.wordpress.com/2014/05/31/emacs-rust-development-setup/">Emacs Rust Development
  Setup</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/273gq2/what_was_the_result_of_the_mutpocalypse/">What was the result of the
  mutpocalypse?</a>
  I am happy that it just fizzled out and died.</li>
<li><a href="http://www.reddit.com/r/rust/comments/276n30/swift_initial_commentary_from_graydon_hoare/">Swift - initial commentary from Graydon
  Hoare</a></li>
<li><a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2014/Panel-Systems-Programming-Languages-in-2014-and-Beyond">Systems Programming in 2014 and
  Beyond</a>,
  a panel discussion featuring our very own Niko Matsakis, as well as Andrei
  Alexandrescu (D developer), Rob Pike, and Bjarne Stroustroup.</li>
<li><a href="http://www.reddit.com/r/rust/comments/27cphk/an_open_call_for_contributions_7_high_priority/">Open Call for Contributions: 7 High Priority Rust Libraries That Need To Be
  Written</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/27ig84/piston_01_released/">Piston 0.1
  Released</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/27jvdt/internet_archaeology_the_definitive_endall_source/">The definitive, end-all source for why Rust is named
  "Rust"</a></li>
<li><a href="http://cmr.github.io/rust-log-viewer/">A tool for viewing <code>RUST_LOG</code> output</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/27qn6y/snowmews_architecture_part_1/">Snowmew's Architecture: Part
  1</a></li>
</ul>
<h1>This Week in Servo</h1>
<p>Servo is a web browser engine written in Rust and is one of the primary test
cases for the Rust language.</p>
<p>In the last three weeks, we landed 77 PRs.</p>
<h2>Notable additions</h2>
<ul>
<li>Patrick Walton improved Wikipedia paint time by 40x through display list optimization.</li>
<li>Jack and many others landed a rust upgrade.</li>
<li>Patrick Walton added reference counted flows, on the path to incremental layout support.</li>
<li>Edit Balint reduced the number of times that we invoke rustc during the Servo build.</li>
<li>Martin Robinson fixed many Linux rendering issues, especially on NVidia cards.</li>
</ul>
<h2>New Contributors</h2>
<ul>
<li>Edit Balint (ebalint)</li>
</ul>
<h2>Meetings and Notes</h2>
<p>There was a <a href="https://github.com/mozilla/servo/wiki/Workweek-roadmap">workweek</a>
last week, and our previous
<a href="https://github.com/mozilla/servo/wiki/Meeting-2014-05-19">two</a>
<a href="https://github.com/mozilla/servo/wiki/Meeting-2014-05-13">meetings</a> covered
the Rust upgrade, 32-bit support, the HTML parser, and gfx rendering.</p>
  </article>

</div>

<div class="row text-center">
  <h3> Like what you see? Subscribe! </h3>
</div>

<div class="row">
  <div class="col-sm-1"></div>
  <div class="col-sm-10">
    <form action="//this-week-in-rust.us11.list-manage.com/subscribe/post?u=fd84c1c757e02889a9b08d289&amp;id=0ed8b72485" method="post" novalidate>
      <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
      <div class="out-of-view-input"><input type="text" name="b_fd84c1c757e02889a9b08d289_0ed8b72485" tabindex="-1" value=""></div>
      <div class="input-group input-group-lg">
        <input type="email" name="EMAIL" class="form-control" placeholder="Enter your email" />
        <span class="input-group-btn">
          <input type="submit" name="subscribe" class="btn btn-default btn-primary" value="Subscribe!" />
        </span>
      </div>
      <span class="help-block small text-muted">Receive a weekly newsletter. Easy to unsubscribe and no spam, promise.</span>
    </form>
  </div>
  <div class="col-sm-1"></div>
</div>      </div>
    </div>

    <footer>
      <div class="container wrapper">
        <div class="row">
          <div class="col-sm-4 col-xs-12">
            <ul class="list-unstyled">
              <li><a href="https://this-week-in-rust.org/blog/archives/index.html">past issues</a></li>
              <li><a href="https://this-week-in-rust.org/atom.xml">atom feed</a></li>
              <li><a href="https://this-week-in-rust.org/rss.xml">rss feed</a></li>
              <li><a href="https://github.com/rust-lang/this-week-in-rust">source code</a></li>
            </ul>
          </div>
          <div class="col-sm-4 col-xs-12">
            <ul class="list-unstyled">
              <li><a href="https://twitter.com/ThisWeekInRust">twitter</a></li>
            </ul>
          </div>
          <div class="col-sm-4 col-xs-12 text-right custom-xs-text-left">
            <ul class="list-unstyled">
              <li><a href="https://this-week-in-rust.org/pages/privacy-policy.html">privacy policy</a></li>
              <li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">cc-by-sa-4.0</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>